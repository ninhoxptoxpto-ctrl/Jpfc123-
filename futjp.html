<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Fut de Botão JP</title>
<style>
body {
  margin: 0;
  background: #0a7a3a;
  overflow: hidden;
  font-family: Arial;
}

#ui {
  position: absolute;
  top: 5px;
  width: 100%;
  text-align: center;
  color: white;
  font-size: 22px;
  font-weight: bold;
}

canvas {
  background: #1fbf63;
  display: block;
  margin: 0 auto;
}

.controls {
  position: absolute;
  bottom: 10px;
  width: 100%;
  display: flex;
  justify-content: center;
  gap: 10px;
}

.btn {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: white;
  font-size: 22px;
  border: none;
}
</style>
</head>

<body>

<div id="ui">⚽ 0 x 0 ⏱ 2:00</div>

<canvas id="game" width="360" height="640"></canvas>

<div class="controls">
  <button class="btn" id="up">↑</button>
  <button class="btn" id="left">←</button>
  <button class="btn" id="right">→</button>
  <button class="btn" id="down">↓</button>
  <button class="btn" id="kick">⚽</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let scoreA = 0;
let scoreB = 0;
let time = 120;

const field = {
  x: 20, y: 40,
  w: 320, h: 560
};

const goalTop = { x: 130, y: 40, w: 100, h: 10 };
const goalBottom = { x: 130, y: 590, w: 100, h: 10 };

const ball = {
  x: 180, y: 320,
  vx: 0, vy: 0,
  r: 8
};

const player = {
  x: 180, y: 500,
  r: 14,
  speed: 3,
  color: "#00e5ff"
};

const enemy = {
  x: 180, y: 120,
  r: 14,
  color: "#a855f7"
};

function drawField() {
  ctx.strokeStyle = "white";
  ctx.lineWidth = 4;
  ctx.strokeRect(field.x, field.y, field.w, field.h);

  ctx.beginPath();
  ctx.arc(180, 320, 60, 0, Math.PI * 2);
  ctx.stroke();

  ctx.fillStyle = "white";
  ctx.fillRect(goalTop.x, goalTop.y, goalTop.w, goalTop.h);
  ctx.fillRect(goalBottom.x, goalBottom.y, goalBottom.w, goalBottom.h);
}

function drawCircle(o) {
  ctx.beginPath();
  ctx.arc(o.x, o.y, o.r, 0, Math.PI * 2);
  ctx.fillStyle = o.color || "white";
  ctx.fill();
}

function resetBall() {
  ball.x = 180;
  ball.y = 320;
  ball.vx = 0;
  ball.vy = 0;
}

function updateBall() {
  ball.x += ball.vx;
  ball.y += ball.vy;

  ball.vx *= 0.98;
  ball.vy *= 0.98;

  if (ball.x < field.x + ball.r || ball.x > field.x + field.w - ball.r)
    ball.vx *= -1;

  if (ball.y < field.y + ball.r || ball.y > field.y + field.h - ball.r)
    ball.vy *= -1;

  if (
    ball.x > goalTop.x &&
    ball.x < goalTop.x + goalTop.w &&
    ball.y < goalTop.y + goalTop.h
  ) {
    scoreB++;
    resetBall();
  }

  if (
    ball.x > goalBottom.x &&
    ball.x < goalBottom.x + goalBottom.w &&
    ball.y > goalBottom.y
  ) {
    scoreA++;
    resetBall();
  }
}

function collide(p) {
  let dx = ball.x - p.x;
  let dy = ball.y - p.y;
  let dist = Math.hypot(dx, dy);
  if (dist < ball.r + p.r) {
    ball.vx = dx * 0.2;
    ball.vy = dy * 0.2;
  }
}

function enemyAI() {
  enemy.x += (ball.x - enemy.x) * 0.02;
  enemy.y += (ball.y - enemy.y) * 0.02;
}

function updateUI() {
  document.getElementById("ui").innerText =
    `⚽ ${scoreA} x ${scoreB} ⏱ ${Math.floor(time/60)}:${String(time%60).padStart(2,"0")}`;
}

setInterval(() => {
  if (time > 0) time--;
}, 1000);

function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawField();

  updateBall();
  enemyAI();

  collide(player);
  collide(enemy);

  drawCircle(ball);
  drawCircle(player);
  drawCircle(enemy);

  updateUI();

  requestAnimationFrame(loop);
}

document.getElementById("up").onclick = () => player.y -= player.speed;
document.getElementById("down").onclick = () => player.y += player.speed;
document.getElementById("left").onclick = () => player.x -= player.speed;
document.getElementById("right").onclick = () => player.x += player.speed;

document.getElementById("kick").onclick = () => {
  let dx = ball.x - player.x;
  let dy = ball.y - player.y;
  ball.vx = dx * 0.4;
  ball.vy = dy * 0.4;
};

loop();
</script>

</body>
</html>
