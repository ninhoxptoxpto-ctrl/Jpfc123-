<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fut de Botão JP</title>
<style>
body{margin:0;background:#0a8f3c;font-family:Arial;color:#fff;text-align:center}
#menu,#teams{padding:20px}
button{padding:12px 18px;margin:6px;border:none;border-radius:10px;font-size:16px}
canvas{background:#1fa34a;border:6px solid #fff;border-radius:12px}
.controls{position:fixed;bottom:10px;width:100%;display:flex;justify-content:space-around}
.ctrl{background:#fff;color:#000;width:60px;height:60px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold}
</style>
</head>

<body>

<div id="menu">
<h2>⚽ Fut de Botão JP</h2>
<button onclick="mode='amistoso';showTeams()">Amistoso</button>
</div>

<div id="teams" style="display:none">
<h3>Escolha os Times</h3>
<button onclick="selectTeam(0)">Fantasma FC</button>
<button onclick="selectTeam(1)">Raio de Gelo</button>
<button onclick="selectTeam(2)">Dragão</button>
<button onclick="selectTeam(3)">Gamers</button>
</div>

<canvas id="game" width="360" height="640" style="display:none"></canvas>

<div class="controls" style="display:none" id="controls">
<div class="ctrl" ontouchstart="press('up')" ontouchend="release()">↑</div>
<div class="ctrl" ontouchstart="press('left')" ontouchend="release()">←</div>
<div class="ctrl" ontouchstart="press('right')" ontouchend="release()">→</div>
<div class="ctrl" ontouchstart="press('down')" ontouchend="release()">↓</div>
<div class="ctrl" ontouchstart="kick()">⚽</div>
</div>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");

let mode="",step="",btn="";
let teamA=null,teamB=null;

const teams=[
{name:"Fantasma",color:"#7a1fa2"},
{name:"Raio",color:"#00ffff"},
{name:"Dragão",color:"#ff2a2a"},
{name:"Gamers",color:"#39ff14"}
];

let players=[],ball;

function showTeams(){
document.getElementById("menu").style.display="none";
document.getElementById("teams").style.display="block";
}

function selectTeam(i){
if(!teamA){teamA=teams[i];return;}
teamB=teams[i];
startGame();
}

function startGame(){
document.getElementById("teams").style.display="none";
canvas.style.display="block";
document.getElementById("controls").style.display="flex";

players=[
{x:180,y:520,vx:0,vy:0,r:18,color:teamA.color},
{x:140,y:120,vx:0,vy:0,r:18,color:teamB.color},
{x:220,y:160,vx:0,vy:0,r:18,color:teamB.color}
];

ball={x:180,y:320,vx:0,vy:0,r:7};

loop();
}

function press(b){btn=b;}
function release(){btn="";}

function kick(){
let p=players[0];
let dx=ball.x-p.x;
let dy=ball.y-p.y;
let d=Math.hypot(dx,dy);
if(d<30){
ball.vx=dx*0.6;
ball.vy=dy*0.6;
}
}

function physics(o){
o.x+=o.vx;
o.y+=o.vy;
o.vx*=0.95;
o.vy*=0.95;

if(o.x-o.r<20){o.x=20+o.r;o.vx*=-1;}
if(o.x+o.r>340){o.x=340-o.r;o.vx*=-1;}
if(o.y-o.r<20){o.y=20+o.r;o.vy*=-1;}
if(o.y+o.r>620){o.y=620-o.r;o.vy*=-1;}
}

function collide(a,b){
let dx=b.x-a.x;
let dy=b.y-a.y;
let d=Math.hypot(dx,dy);
if(d<a.r+b.r){
let nx=dx/d, ny=dy/d;
a.vx-=nx*1.2;
a.vy-=ny*1.2;
b.vx+=nx*1.2;
b.vy+=ny*1.2;
}
}

function control(){
let p=players[0];
if(btn=="up")p.vy-=0.6;
if(btn=="down")p.vy+=0.6;
if(btn=="left")p.vx-=0.6;
if(btn=="right")p.vx+=0.6;
}

function drawPlayer(p){
ctx.beginPath();
ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
ctx.fillStyle=p.color;
ctx.fill();
}

function loop(){
ctx.clearRect(0,0,360,640);

ctx.strokeStyle="#fff";
ctx.lineWidth=4;
ctx.strokeRect(20,20,320,600);

control();

players.forEach(p=>physics(p));
physics(ball);

players.forEach(p=>collide(p,ball));
collide(players[1],players[2]);

ctx.beginPath();
ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
ctx.fillStyle="#fff";
ctx.fill();

players.forEach(drawPlayer);

requestAnimationFrame(loop);
}
</script>
</body>
</html>
