<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fut de Botão JP Ultimate</title>
<style>
body{margin:0;background:#0b8f3f;font-family:Arial;overflow:hidden}
#menu,#teams,#mode{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff}
button{padding:14px 22px;margin:8px;border:none;border-radius:14px;font-size:18px}
canvas{background:#1fbf5b;display:none}
.controls{position:fixed;bottom:10px;width:100%;display:flex;justify-content:space-around}
.ctrl{width:65px;height:65px;border-radius:50%;background:#fff;color:#000;font-weight:bold;display:flex;align-items:center;justify-content:center}
</style>
</head>

<body>

<div id="menu">
<h2>⚽ FUT DE BOTÃO JP</h2>
<button onclick="showMode()">JOGAR</button>
</div>

<div id="mode" style="display:none">
<button onclick="mode='ia';showTeams()">Modo IA</button>
<button onclick="mode='2p';showTeams()">2 Jogadores</button>
</div>

<div id="teams" style="display:none">
<h3>Escolha os Times</h3>
<button onclick="pick(0)">Fantasma FC</button>
<button onclick="pick(1)">Dragão FC</button>
<button onclick="pick(2)">Raio Azul</button>
<button onclick="pick(3)">Gelo Branco</button>
</div>

<canvas id="game" width="360" height="640"></canvas>

<div class="controls" id="controls" style="display:none">
<div class="ctrl" ontouchstart="btn='up'" ontouchend="btn=''">↑</div>
<div class="ctrl" ontouchstart="btn='left'" ontouchend="btn=''">←</div>
<div class="ctrl" ontouchstart="btn='right'" ontouchend="btn=''">→</div>
<div class="ctrl" ontouchstart="btn='down'" ontouchend="btn=''">↓</div>
<div class="ctrl" ontouchstart="kick()">⚽</div>
</div>

<script>
const c=document.getElementById("game");
const ctx=c.getContext("2d");

let btn="",mode="";
let t1=null,t2=null,sel=0;

const teams=[
{name:"Fantasma",color:"#8a2be2"},
{name:"Dragão",color:"#ff3030"},
{name:"Raio",color:"#00ffff"},
{name:"Gelo",color:"#ffffff"}
];

let players=[],ball;

function showMode(){
menu.style.display="none";
modeDiv.style.display="flex";
}
const modeDiv=document.getElementById("mode");

function showTeams(){
modeDiv.style.display="none";
teamsDiv.style.display="flex";
}
const teamsDiv=document.getElementById("teams");

function pick(i){
if(!t1){t1=teams[i];return;}
t2=teams[i];
start();
}

function start(){
teamsDiv.style.display="none";
c.style.display="block";
controls.style.display="flex";

players=[
{x:180,y:520,vx:0,vy:0,r:18,color:t1.color,ai:false},
{x:140,y:120,vx:0,vy:0,r:18,color:t2.color,ai:true},
{x:220,y:160,vx:0,vy:0,r:18,color:t2.color,ai:true}
];

ball={x:180,y:320,vx:0,vy:0,r:7};

loop();
}

function kick(){
let p=players[0];
let dx=ball.x-p.x;
let dy=ball.y-p.y;
let d=Math.hypot(dx,dy);
if(d<32){
ball.vx=dx*0.7;
ball.vy=dy*0.7;
}
}

function aiMove(p){
let dx=ball.x-p.x;
let dy=ball.y-p.y;
let d=Math.hypot(dx,dy);
p.vx+=dx/d*0.25;
p.vy+=dy/d*0.25;
}

function physics(o){
o.x+=o.vx;
o.y+=o.vy;
o.vx*=0.96;
o.vy*=0.96;

if(o.x-o.r<20){o.x=20+o.r;o.vx*=-1;}
if(o.x+o.r>340){o.x=340-o.r;o.vx*=-1;}
if(o.y-o.r<20){o.y=20+o.r;o.vy*=-1;}
if(o.y+o.r>620){o.y=620-o.r;o.vy*=-1;}
}

function collide(a,b){
let dx=b.x-a.x;
let dy=b.y-a.y;
let d=Math.hypot(dx,dy);
if(d<a.r+b.r){
let nx=dx/d,ny=dy/d;
a.vx-=nx*1.2;
a.vy-=ny*1.2;
b.vx+=nx*1.2;
b.vy+=ny*1.2;
}
}

function control(){
let p=players[0];
if(btn=="up")p.vy-=0.6;
if(btn=="down")p.vy+=0.6;
if(btn=="left")p.vx-=0.6;
if(btn=="right")p.vx+=0.6;
}

function drawField(){
ctx.strokeStyle="#fff";
ctx.lineWidth=4;
ctx.strokeRect(20,20,320,600);

ctx.beginPath();
ctx.moveTo(20,320);
ctx.lineTo(340,320);
ctx.stroke();

ctx.beginPath();
ctx.arc(180,320,60,0,Math.PI*2);
ctx.stroke();
}

function drawPlayer(p){
ctx.beginPath();
ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
ctx.fillStyle=p.color;
ctx.fill();
ctx.strokeStyle="#000";
ctx.stroke();
}

function loop(){
ctx.clearRect(0,0,360,640);

drawField();
control();

players.forEach(p=>{
if(p.ai)aiMove(p);
physics(p);
});

physics(ball);

players.forEach(p=>collide(p,ball));
collide(players[1],players[2]);

ctx.beginPath();
ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
ctx.fillStyle="#fff";
ctx.fill();

players.forEach(drawPlayer);

requestAnimationFrame(loop);
}
</script>
</body>
  </html>
