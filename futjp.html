<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Fut de Botão JP — HaxBall Style</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:#0b5;font-family:Arial;text-align:center;color:#fff}
canvas{background:#1f8f3a;border:6px solid #fff;border-radius:12px}
button{padding:10px 18px;margin:6px;border:none;border-radius:8px;font-size:16px}
.menu{padding:20px}
.hidden{display:none}
</style>
</head>

<body>

<div id="menu" class="menu">
<h2>⚽ Fut de Botão JP</h2>
<button onclick="startGame('ia')">Modo IA</button>
<button onclick="startGame('2p')">2 Jogadores</button>
</div>

<canvas id="game" width="360" height="640" class="hidden"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let mode = "ia";
let ball, players, enemy, goal1, goal2;
let score1=0, score2=0;
let time=72;

const teams = [
 {name:"Fantasma FC",color:"#7a1fa2",players:["JP 11","Ninho 10"]},
 {name:"Raio de Gelo",color:"#00ffff",players:["Adriano 09","Luan 08"]},
 {name:"Praia do Dragão",color:"#ff2a2a",players:["Vanessa 10","Noah 07"]},
 {name:"Gamers FC",color:"#39ff14",players:["Julia 05","Dores 10"]},
 {name:"Trovão",color:"#ffaa00",players:["Rafa 09","Igor 11"]},
 {name:"Leões",color:"#ffd700",players:["Pedro 10","Caio 07"]},
 {name:"Fênix",color:"#ff66cc",players:["Leo 11","Bruno 09"]},
 {name:"Gladiadores",color:"#aaa",players:["Alan 10","Victor 08"]}
];

function startGame(m){
 mode=m;
 document.getElementById("menu").classList.add("hidden");
 canvas.classList.remove("hidden");
 init();
}

function init(){
 ball={x:180,y:320,vx:0,vy:0,r:7};

 players=[
  {x:140,y:500,r:18,color:"#7a1fa2",name:"JP 11"},
  {x:220,y:540,r:18,color:"#7a1fa2",name:"Ninho 10"}
 ];

 enemy=[
  {x:140,y:140,r:18,color:"#ff2a2a",name:"Adriano 09"},
  {x:220,y:180,r:18,color:"#ff2a2a",name:"Sancha 08"}
 ];

 goal1={x:110,y:610,w:140,h:10};
 goal2={x:110,y:20,w:140,h:10};

 loop();
}

const keys={};
document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

function control(p){
 if(keys["ArrowLeft"]) p.x-=3;
 if(keys["ArrowRight"]) p.x+=3;
 if(keys["ArrowUp"]) p.y-=3;
 if(keys["ArrowDown"]) p.y+=3;
}

function aiMove(p){
 let dx=ball.x-p.x;
 let dy=ball.y-p.y;
 let d=Math.hypot(dx,dy);
 if(d<220){
  p.x+=dx/d*1.8;
  p.y+=dy/d*1.8;
 }
}

function collide(p){
 let dx=ball.x-p.x;
 let dy=ball.y-p.y;
 let d=Math.hypot(dx,dy);
 if(d<p.r+ball.r){
  ball.vx=dx*0.25;
  ball.vy=dy*0.25;
 }
}

function goalCheck(){
 if(ball.y<30 && ball.x>110 && ball.x<250){
  score1++; reset();
 }
 if(ball.y>610 && ball.x>110 && ball.x<250){
  score2++; reset();
 }
}

function reset(){
 ball.x=180; ball.y=320;
 ball.vx=0; ball.vy=0;
}

function drawPlayer(p){
 ctx.beginPath();
 ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
 ctx.fillStyle=p.color;
 ctx.fill();
 ctx.fillStyle="#fff";
 ctx.font="10px Arial";
 ctx.fillText(p.name,p.x-20,p.y+4);
}

function loop(){
 ctx.clearRect(0,0,360,640);

 // campo
 ctx.strokeStyle="#fff";
 ctx.lineWidth=4;
 ctx.strokeRect(20,20,320,600);

 // gols
 ctx.fillStyle="#fff";
 ctx.fillRect(goal1.x,goal1.y,goal1.w,goal1.h);
 ctx.fillRect(goal2.x,goal2.y,goal2.w,goal2.h);

 // bola
 ball.x+=ball.vx;
 ball.y+=ball.vy;
 ball.vx*=0.98;
 ball.vy*=0.98;

 ctx.beginPath();
 ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
 ctx.fillStyle="#fff";
 ctx.fill();

 // jogadores
 control(players[0]);
 control(players[1]);

 enemy.forEach(e=>aiMove(e));

 players.forEach(p=>{
  collide(p);
  drawPlayer(p);
 });

 enemy.forEach(e=>{
  collide(e);
  drawPlayer(e);
 });

 goalCheck();

 // placar
 ctx.fillStyle="#fff";
 ctx.font="18px Arial";
 ctx.fillText(score1+" x "+score2,150,40);

 requestAnimationFrame(loop);
}
</script>

</body>
</html>
