<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fut de Botão JP</title>

<style>
body{margin:0;background:#0b7a3b;font-family:Arial;overflow:hidden}
#top{color:#fff;text-align:center;padding:8px;font-size:18px;font-weight:bold}
canvas{display:block;margin:auto;background:#1ec95b}
#golText{
position:fixed;top:40%;width:100%;
text-align:center;font-size:48px;
color:yellow;font-weight:bold;
display:none;text-shadow:3px 3px 8px #000
}
#controls{
position:fixed;bottom:10px;width:100%;
display:flex;justify-content:space-around
}
.btn{width:64px;height:64px;border-radius:50%;border:none;font-size:22px}
</style>
</head>

<body>

<div id="top">⚽ 0 x 0 | ⏱️ 01:20</div>
<div id="golText">GOOOOOL!!!</div>

<canvas id="game" width="360" height="640"></canvas>

<div id="controls">
<button class="btn" ontouchstart="key='up'" ontouchend="key=''">↑</button>
<button class="btn" ontouchstart="key='left'" ontouchend="key=''">←</button>
<button class="btn" ontouchstart="key='right'" ontouchend="key=''">→</button>
<button class="btn" ontouchstart="key='down'" ontouchend="key=''">↓</button>
<button class="btn" ontouchstart="kick()">⚽</button>
</div>

<script>
const c=document.getElementById("game");
const ctx=c.getContext("2d");

let time=80;
let scoreA=0,scoreB=0;
let key="";

const field={x:20,y:20,w:320,h:600};

const goalTop={x:150,y:20,w:60,h:10};
const goalBottom={x:150,y:630,w:60,h:10};

const ball={x:180,y:320,vx:0,vy:0,r:8};

const players=[
{x:180,y:520,vx:0,vy:0,r:18,color:"#7b2cff",ai:false},
{x:180,y:120,vx:0,vy:0,r:18,color:"#ff3333",ai:true}
];

function kick(){
let p=players[0];
let dx=ball.x-p.x;
let dy=ball.y-p.y;
let d=Math.hypot(dx,dy);
if(d<30){
ball.vx=dx*1.1;
ball.vy=dy*1.1;
}
}

function aiMove(p){
let goalX=180;
let goalY=620;

let dx=ball.x-p.x;
let dy=ball.y-p.y;
let d=Math.hypot(dx,dy)||1;

p.vx+=dx/d*0.3;
p.vy+=dy/d*0.3;

// se estiver perto da bola → chuta pro gol
if(d<28){
let gx=goalX-ball.x;
let gy=goalY-ball.y;
let gd=Math.hypot(gx,gy)||1;
ball.vx=gx/gd*5;
ball.vy=gy/gd*5;
}
}

function move(p){
p.x+=p.vx;p.y+=p.vy;
p.vx*=0.92;p.vy*=0.92;

if(p.x-p.r<field.x){p.x=field.x+p.r;p.vx*=-1}
if(p.x+p.r>field.x+field.w){p.x=field.x+field.w-p.r;p.vx*=-1}
if(p.y-p.r<field.y){p.y=field.y+p.r;p.vy*=-1}
if(p.y+p.r>field.y+field.h){p.y=field.y+field.h-p.r;p.vy*=-1}

let dx=ball.x-p.x;
let dy=ball.y-p.y;
let d=Math.hypot(dx,dy);
if(d<p.r+ball.r){
ball.vx+=dx*0.15;
ball.vy+=dy*0.15;
}
}

function goal(){
document.getElementById("golText").style.display="block";
setTimeout(()=>{
document.getElementById("golText").style.display="none";
reset();
},1000);
}

function reset(){
ball.x=180;ball.y=320;ball.vx=0;ball.vy=0;
players[0].x=180;players[0].y=520;
players[1].x=180;players[1].y=120;
}

function drawField(){
ctx.strokeStyle="#fff";
ctx.lineWidth=4;
ctx.strokeRect(field.x,field.y,field.w,field.h);

ctx.fillStyle="#fff";
ctx.fillRect(goalTop.x,goalTop.y,goalTop.w,goalTop.h);
ctx.fillRect(goalBottom.x,goalBottom.y,goalBottom.w,goalBottom.h);
}

function update(){
ctx.clearRect(0,0,360,640);

if(key=="up")players[0].vy-=0.8;
if(key=="down")players[0].vy+=0.8;
if(key=="left")players[0].vx-=0.8;
if(key=="right")players[0].vx+=0.8;

aiMove(players[1]);

players.forEach(p=>move(p));

ball.x+=ball.vx;
ball.y+=ball.vy;
ball.vx*=0.99;
ball.vy*=0.99;

// gols
if(ball.y<25 && ball.x>150 && ball.x<210){
scoreA++;goal();
}
if(ball.y>615 && ball.x>150 && ball.x<210){
scoreB++;goal();
}

drawField();

players.forEach(p=>{
ctx.beginPath();
ctx.fillStyle=p.color;
ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
ctx.fill();
});

ctx.beginPath();
ctx.fillStyle="#fff";
ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
ctx.fill();

document.getElementById("top").innerText=
`⚽ ${scoreA} x ${scoreB} | ⏱️ ${Math.floor(time/60)}:${String(time%60).padStart(2,"0")}`;

requestAnimationFrame(update);
}

setInterval(()=>{if(time>0)time--},1000);

update();
</script>
</body>
</html>
