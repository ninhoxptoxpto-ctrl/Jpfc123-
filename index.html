<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Futebol JP</title>

<style>
body{
  background:#0b6623;
  color:white;
  text-align:center;
  font-family:Arial;
}
canvas{
  background:#1f8f4d;
  border:4px solid white;
}
button{
  margin:5px;
  padding:10px 25px;
  font-size:18px;
  border-radius:10px;
  border:none;
}
</style>
</head>

<body>

<h2 id="tempo">⏱ 2:00</h2>
<h2 id="placar">0 x 0</h2>

<canvas id="campo" width="360" height="520"></canvas><br>

<button onclick="chutar()">⚽ Chutar</button>
<button onclick="passar()">➡ Passe</button>

<script>
const canvas = document.getElementById("campo");
const ctx = canvas.getContext("2d");

let tempo = 120;
let golsMeu = 0;
let golsAdv = 0;

let bola = {x:180,y:260,vx:0,vy:0,r:7};

let meu = [
  {x:180,y:420,nome:"JP",num:11,cor:"blue"},
  {x:130,y:450,nome:"Ninho",num:10,cor:"blue"}
];

let adv = [
  {x:180,y:120,nome:"CPU",num:9,cor:"red"},
  {x:130,y:150,nome:"CPU",num:8,cor:"red"}
];

let gkMeu = {x:180,y:500};
let gkAdv = {x:180,y:20};

function chutar(){
  bola.vy = -9;
  reagirGoleiro(gkAdv);
}

function passar(){
  bola.vx = Math.random()<0.5 ? -4 : 4;
  bola.vy = -3;
}

function reagirGoleiro(gk){
  let alvo = bola.x;
  if(Math.random()<0.6){
    gk.x += (alvo - gk.x)/2;
  }
}

function atualizar(){
  bola.x += bola.vx;
  bola.y += bola.vy;
  bola.vx *= 0.98;
  bola.vy *= 0.98;

  // ataque adversário automático
  if(Math.random()<0.01){
    bola.vy = 8;
    reagirGoleiro(gkMeu);
  }

  // gols
  if(bola.y < 20){
    golsMeu++;
    resetar();
  }
  if(bola.y > 500){
    golsAdv++;
    resetar();
  }

  document.getElementById("placar").innerText =
    golsMeu + " x " + golsAdv;

  desenhar();
}

function resetar(){
  bola.x=180;
  bola.y=260;
  bola.vx=0;
  bola.vy=0;
  gkMeu.x=180;
  gkAdv.x=180;
}

function desenharJogador(p){
  ctx.beginPath();
  ctx.arc(p.x,p.y,12,0,Math.PI*2);
  ctx.fillStyle=p.cor;
  ctx.fill();
  ctx.fillStyle="white";
  ctx.font="10px Arial";
  ctx.fillText(p.nome,p.x-18,p.y-16);
  ctx.fillText(p.num,p.x-6,p.y+4);
}

function desenhar(){
  ctx.clearRect(0,0,360,520);

  // gols
  ctx.fillStyle="white";
  ctx.fillRect(110,5,140,10);
  ctx.fillRect(110,505,140,10);

  // bola
  ctx.beginPath();
  ctx.arc(bola.x,bola.y,bola.r,0,Math.PI*2);
  ctx.fillStyle="white";
  ctx.fill();

  meu.forEach(desenharJogador);
  adv.forEach(desenharJogador);

  desenharJogador({...gkMeu,cor:"blue",nome:"GK",num:1});
  desenharJogador({...gkAdv,cor:"red",nome:"GK",num:1});
}

setInterval(atualizar,20);

// tempo
setInterval(()=>{
  if(tempo>0){
    tempo--;
    let m = Math.floor(tempo/60);
    let s = tempo%60;
    document.getElementById("tempo").innerText =
      "⏱ "+m+":"+(s<10?"0"+s:s);
  }
},1000);
</script>

</body>
</html>
