<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Campeonato Futebol JP</title>

<style>
body {
  background:#0b6623;
  color:white;
  text-align:center;
  font-family:Arial;
}

button {
  padding:12px 25px;
  font-size:18px;
  margin:5px;
  border-radius:10px;
  border:none;
}

canvas {
  background:#1e7f3f;
  border:5px solid white;
  margin-top:10px;
}
</style>
</head>

<body>

<h1>âš½ Campeonato Futebol</h1>

<div id="menu">
  <h2>Escolha seu time</h2>
  <button onclick="escolherTime('Raios de Gelo')">â„ï¸ Raios de Gelo</button>
  <button onclick="escolherTime('Fantasma FC')">ğŸ‘» Fantasma FC</button>
  <button onclick="escolherTime('Gamers FC')">ğŸ® Gamers FC</button>
  <button onclick="escolherTime('Praia do DragÃ£o')">ğŸ‰ Praia do DragÃ£o</button>
</div>

<div id="jogo" style="display:none;">
  <h2 id="placar">0 x 0</h2>
  <canvas id="campo" width="600" height="400"></canvas><br>
  <button onclick="chutar()">âš½ Chutar</button>
</div>

<audio id="somGol">
  <source src="https://actions.google.com/sounds/v1/sports/soccer_goal.ogg">
</audio>

<script>
let canvas = document.getElementById("campo");
let ctx = canvas.getContext("2d");

let meuTime = "";
let adversario = "";
let golsMeu = 0;
let golsAdv = 0;

let artilheiro = {};

let bola = {x:300,y:300,vx:0,vy:0,r:8};

let gol = {x:200,y:10,w:200,h:15};

function escolherTime(time){
  meuTime = time;

  let times = ["Raios de Gelo","Fantasma FC","Gamers FC","Praia do DragÃ£o"];
  adversario = times.filter(t=>t!==time)[Math.floor(Math.random()*3)];

  document.getElementById("menu").style.display="none";
  document.getElementById("jogo").style.display="block";

  alert("Partida:\n" + meuTime + " x " + adversario);
}

function chutar(){
  bola.vy = -7;
}

function atualizar(){
  bola.x += bola.vx;
  bola.y += bola.vy;
  bola.vx *= 0.98;
  bola.vy *= 0.98;

  // GOL
  if(
    bola.y < gol.y + gol.h &&
    bola.x > gol.x &&
    bola.x < gol.x + gol.w
  ){
    document.getElementById("somGol").play();
    golsMeu++;
    registrarGol("JP");
    resetar();
  }

  // gol adversÃ¡rio aleatÃ³rio
  if(Math.random() < 0.002){
    golsAdv++;
  }

  document.getElementById("placar").innerText =
    golsMeu + " x " + golsAdv;

  desenhar();
}

function registrarGol(jogador){
  if(!artilheiro[jogador]) artilheiro[jogador]=0;
  artilheiro[jogador]++;
}

function resetar(){
  bola.x=300;
  bola.y=300;
  bola.vx=0;
  bola.vy=0;
}

function desenhar(){
  ctx.clearRect(0,0,600,400);

  // gol
  ctx.fillStyle="white";
  ctx.fillRect(gol.x,gol.y,gol.w,gol.h);

  // bola
  ctx.beginPath();
  ctx.arc(bola.x,bola.y,bola.r,0,Math.PI*2);
  ctx.fillStyle="white";
  ctx.fill();
}

setInterval(atualizar,20);

window.onbeforeunload = function(){
  let resultado = "";

  if(golsMeu > golsAdv) resultado="ğŸ† VitÃ³ria";
  else if(golsMeu < golsAdv) resultado="âŒ Derrota";
  else resultado="ğŸ¤ Empate";

  let art = "";
  for(let j in artilheiro){
    art += j + ": " + artilheiro[j] + " gols\n";
  }

  alert(
    resultado +
    "\n\nArtilheiro:\n" + art
  );
};
</script>

</body>
</html>
